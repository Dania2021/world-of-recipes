{% extends "base.html" %}
{% load static %}

{% block content %}

 <div class="masthead">
     <div class="container-fluid mb-5">
          <div class="row justify-content-center">
            <!--To view recipe-->
               <div class="col-md-6">
                    {% if user.is_authenticated %}
                    <div class="card-panel">
                             <div class="card-body ps-5 px-5 mt-4 mb-4">
                               <div class="recipe-img-container">
                                  {% if 'placeholder' in recipe.recipe_image.url %}
                                  <img class="card-img-top" width="300px" height="300px"
                                  src="https://codeinstitute.s3.amazonaws.com/fullstack/blog/default.jpg">
                                  {% else %}
                                  <img class="card-img-top" width="300px" height="300px"
                                  src="{{ recipe.recipe_image.url }}">
                                  {% endif %}
                               </div>
                         </div> 
                          <div class="text-center">
                              <p><span class="fw-bold">Title:</span> {{ recipe.title }}</p>
                              <p><span class="fw-bold">By {{ recipe.author }}</span></p>
                              <p><span class="fw-bold">Ingredients:</span> {{ recipe.ingredients }}</p>
                              <p><span class="fw-bold">Serves:</span> {{ recipe.serves }}</p>
                              <p><span class="fw-bold">Duration(in minutes):</span> {{ recipe.duration }}</p>
                              <p><span class="fw-bold">Cuisine:</span> {{ recipe.cuisine_name }}</p>
                              <p><span class="fw-bold">Skill Level:</span> {{ recipe.skill_level }}</p>
                              <p><span class="fw-bold">Steps:</span> {{ recipe.steps }}</p>
                           </div>
                    
                           <div class="row text-center">
                                <!--Update recipe link-->
                                <div class="col">
                                    <a href="{% url 'recipe_edit' recipe.id %}" class="btn btn-dark mt-4 up-btn">
                                      Update
                                    </a>
                                  </div>
                                {% endif %}
                                  <div class="col">
                                    <!--Form Recipe Deletion-->
                                    <form method="POST" action="{% url 'recipe_delete' recipe.id %}" id="recipe-delete">
                                       {% csrf_token %}
                                       <button type="button" class="btn btn-dark mt-4 mx-4" aria-label="Delete recipe" data-bs-toggle="modal" data-bs-target="#modal-confirm-delete">
                                         Delete
                                        </button>
                                     </form>
                                  </div>
                            </div>
                          
                            <!--Modal to delete a recipe-->
                           <div class="modal" tabindex="-1" id="modal-confirm-delete">
                              <div class="modal-dialog">
                                <div class="modal-content">
                                   <div class="modal-header">
                                      <h3 class="modal-title">Delete Recipe</h3>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                      <h5>Are you sure you want to delete this recipe?</h5>
                                      <p>This action cannot be undone.</p>
                                    </div>
                                    <div class="modal-footer">
                                       <button type="button" class="btn btn-dark" data-bs-dismiss="modal" aria-label="Cancel deletion">No</button>
                                       <button type="submit" class="btn btn-dark ms-4" aria-label="Confirm deletion" form="recipe-delete" data-bs-dismiss="modal">Yes</button>
                                     </div>
                                 </div>
                             </div>
                          </div>
                       </div>
                    </div>
                </div>
          </div>
    </div>  
{% endblock %}